---
services:
  giphymcp:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile.giphymcp
    container_name: giphymcp
    restart: unless-stopped
    ports:
      - "6100:6100"
    environment:
    #  - GIPHY_API_KEY=${GIPHY_API_KEY} # Ensure this is set in your .env file or environment
      - LOG_LEVEL=INFO # Or DEBUG for more verbose logging
      - GIPHY_MCP_SERVER_PORT=6100 # Port the server inside the container will listen on
    networks:
      - intranet

  ytmcp:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile.ytmcp
    container_name: ytmcp
    ports:
      - "6500:6500"
    restart: unless-stopped
    networks:
      - intranet
    environment:
    #   - YOUTUBE_API_KEY=${YOUTUBE_API_KEY}
      - LOG_LEVEL=INFO
      - YOUTUBE_MCP_SERVER_PORT=6500

  usersmcp:
    build:
       context: .
       dockerfile: dockerfiles/Dockerfile.usersmcp
    container_name: usersmcp
    restart: unless-stopped
    ports:
      - "6600:6600"
    environment:
      - USER_API_BASE_URL=http://usercontext_api:9000/api/v1
      - LOG_LEVEL=DEBUG
    networks:
      - intranet

  wamcp:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile.wamcp
    container_name: wamcp
    ports:
      - "6700:6700"
    restart: unless-stopped
    environment:
      #- WOLFRAMALPHA_APP_ID=${WOLFRAMALPHA_APP_ID} # Pass the App ID from your .env file or host environment
      - LOG_LEVEL=INFO
      - WOLFRAMALPHA_MCP_SERVER_PORT=6700
    networks:
      - intranet

  pistonmcp:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile.pmcp
    container_name: pistonmcp
    ports:
      - "6800:6800"
    restart: unless-stopped
    environment:
      - PISTON_MCP_PORT=6800
      - PISTON_API_BASE_URL=https://emkc.org/api/v2/piston
      - LOG_LEVEL=INFO
    networks:
      - intranet

  cvemcp:
    build:
      context: .
      dockerfile: dockerfiles/Dockerfile.cvemcp
    container_name: cvemcp
    ports:
      - "6900:6900"
    restart: unless-stopped
    environment:
      - CVE_MCP_PORT=6900
      # - NVD_API_KEY=${NVD_API_KEY} # Optional: NVD API key for higher rate limits
      - LOG_LEVEL=INFO
    networks:
      - intranet

  #tenormcp:
  #  build:
  #    context: .
  #    dockerfile: dockerfiles/Dockerfile.tenormcp
  #  container_name: tenormcp
  #  ports:
  #    - "7200:7200"
  #  restart: unless-stopped
  #  environment:
  #    - TENOR_MCP_SERVER_PORT=7200
  #    # - TENOR_API_KEY=${TENOR_API_KEY} # Ensure this is set in your .env file or environment
  #    - TENOR_CONTENT_FILTER=medium
  #    - TENOR_LOCALE=en_US
  #    - LOG_LEVEL=INFO
  #  networks:
  #    - intranet
      
networks:
  intranet:
    external: true